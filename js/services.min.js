var services=angular.module("twitchList.services",[]),RequestFactory=function(t){return{get:function(e,n,a){t.get(e).then(n,a)}}};RequestFactory.$inject=["$http"];var LocationService=function(t){function i(e){t.location.search+=e}function r(e){t.location.hash+=e}function s(t){var e={};return t.filter(function(t){return e.hasOwnProperty(t)?!1:e[t]=!0})}function l(t,e){return""===t?[]:(console.log("OK"),s(t.substr(1,t.length).split(e)))}var e=t.location.search,n=t.location.hash,a=t.location.pathname;this.getPath=function(){return a},this.appendSearch=i,this.appendHash=r,this.getSearchSplit=function(t){return l(e,t)},this.getHashSplit=function(t){return l(n,t)}};LocationService.$inject=["$window"];var TwitchListService=function(t,e){var n="https://api.twitch.tv/kraken/",a="https://player.twitch.tv/?channel=";this.requestStream=function(e){var i={};return i.name=e,t.get(n+"channels/"+e,function(r){i.logo=null!==r.data.logo?r.data.logo:"img/150x150-placeholder.png",i.name=r.data.name,i.title=r.data.status,i.url=a+i.name,t.get(n+"streams/"+e,function(t){i.status=null!==t.data.stream?"online":"offline"})},function(){i.logo="img/150x150-placeholder.png",i.name=e,i.title="Account Unavailable",i.url="http://twitch.tv/404/404"}),i},this.splitAddressSearch=function(t){return e.getSearchSplit(t)},this.splitAddressHash=function(t){return e.getHashSplit(t)}};TwitchListService.$inject=["requestFactory","locationService"],services.factory("requestFactory",RequestFactory),services.service("locationService",LocationService),services.service("twitchListService",TwitchListService);
